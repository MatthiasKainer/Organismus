
    <div class="markdown-body">
      <style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:0}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:' ';display:inline-block;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'%3E%3C/path%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.5;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{font-size:2em;margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;height:0;overflow:visible}.markdown-body input{font:inherit;margin:0}.markdown-body input{overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:0 0;border:0;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-top:8px!important;margin-bottom:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important}.markdown-body .my-2{margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:0 0;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style>
      <style>/**
 * GitHub Gist Theme
 * Author : Anthony Attard - https://github.com/AnthonyAttard
 * Author : Louis Barranqueiro - https://github.com/LouisBarranqueiro
 */

.hljs {
  display: block;
  background: white;
  padding: 0.5em;
  color: #333333;
  overflow-x: auto;
}

.hljs-comment,
.hljs-meta {
  color: #969896;
}

.hljs-variable,
.hljs-template-variable,
.hljs-strong,
.hljs-emphasis,
.hljs-quote {
  color: #df5000;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-type {
  color: #d73a49;
}

.hljs-literal,
.hljs-symbol,
.hljs-bullet,
.hljs-attribute {
  color: #0086b3;
}

.hljs-section,
.hljs-name {
  color: #63a35c;
}

.hljs-tag {
  color: #333333;
}

.hljs-title,
.hljs-attr,
.hljs-selector-id,
.hljs-selector-class,
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #6f42c1;
}

.hljs-addition {
  color: #55a532;
  background-color: #eaffea;
}

.hljs-deletion {
  color: #bd2c00;
  background-color: #ffecec;
}

.hljs-link {
  text-decoration: underline;
}

.hljs-number {
  color: #005cc5;
}

.hljs-string {
  color: #032f62;
}
</style>
      
      <h1>Organismus</h1>
<blockquote>
<p>Organismus, german for Organism. A system regarded as analogous in its structure or functions to a living body.</p>
</blockquote>
<p>A library to share messages in your frontend application organism without additional wiring. See the tabs for some examples</p>
<h2>Note</h2>
<p>This library is an experimental approach to state management, and is mostly me &quot;thinking out loud&quot;. If you want to use it (or something like it) feel free, just be aware that I feel it's partly too implicit, needs to much thinking to do it right, and I can think of a dozen ways it would screw you over.</p>
<p>That being said, have fun.</p>
<h2>Purpose</h2>
<p>The most difficult part of every application is state management. There are sufficient solutions for local state (the element itself), for the application it's more difficult.</p>
<p>Properties/Events can help you there, but might lead to prop-drilling (passing properties down until they are needed), or via context in libraries like react which is tightly coupled to the UI itself.</p>
<p>This library uses an approach that focused on the global (organism) level, allowing you to send messages between cells (elements) of your page.</p>
<h2>Wording/Domain</h2>
<p>This library uses the wording that is coming from Biology, and at such aims to replicate patterns learned there with some abstraction on top of it.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Organism</strong></td>
<td>The application, or group of applications (microfrontends) that act as one</td>
</tr>
<tr>
<td><strong>Hormone</strong></td>
<td>A specific message, send by special hormone producing entities that can <code>released</code> and carry some <code>state</code></td>
</tr>
<tr>
<td><strong>Receptor</strong></td>
<td>An interface on a LitElement that can receive one type of hormone and gets triggered every time the hormone is released</td>
</tr>
<tr>
<td><strong>Hypothalamus</strong></td>
<td>Allows to orchestrate hormones and trigger side-effects on a global (organism wide) level</td>
</tr>
</tbody>
</table>
<p>The idea that Organismus follows is different from other libraries because it means that hormones must not be triggered by components only, but basically by everything, and therefore allows you to, as an example, connect a web-socket service class with your components.</p>
<p>In difference to libraries like redux it means that you don't have one global state, but a state for each hormone that is orchestrated by events.</p>
<h2>Usage</h2>
<h3>Install</h3>
<p>You should do this only for testing/playing around</p>
<pre class="hljs" v-pre><code>npm install organismus
</code></pre>
<h3>Global and scoped</h3>
<p>There is always an organism available at the global level, thats is for every application that runs under the same module tree (has the same dependency to the same organismus like the other parts of the application).</p>
<p>However, you can easily get a scoped version. Create one by</p>
<pre class="hljs" v-pre><code><span class="hljs-keyword">const</span> scopedOrganismus = Organismus()
scopedOrganismus.defineHormone&lt;ExampleHormone&gt;(<span class="hljs-string">&quot;example&quot;</span>);
scopedOrganismus.useReceptor(litElement, { <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;example&quot;</span> }, onTriggered)
  
<span class="hljs-comment">// When</span>
<span class="hljs-keyword">await</span> scopedOrganismus.releaseHormone(hormone);
</code></pre>
<p>In the examples, only the global organismus will be used.</p>
<h3>Hormones and receptors</h3>
<p>The hormone is the base unit, and has to be defined first anywhere.</p>
<p>The defined hormone can then be used to be <code>released</code>, or to define a receptor.</p>
<pre class="hljs" v-pre><code><span class="hljs-keyword">const</span> hormone = defineHormone&lt;<span class="hljs-built_in">boolean</span>&gt;(<span class="hljs-string">&quot;example&quot;</span>);

<span class="hljs-comment">// with react</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> SomeElement = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> [getState, setState] = useState(<span class="hljs-literal">false</span>)
  useReceptor(element, hormone, setState);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>React State: {getState()}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>;
}

<span class="hljs-comment">// with pure-lit</span>
pureLit(<span class="hljs-string">&quot;some-element&quot;</span>, <span class="hljs-function">(<span class="hljs-params">element</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> {getState, publish} = useState(element, <span class="hljs-literal">false</span>)
  <span class="hljs-comment">// define receptor</span>
  useReceptor(element, hormone, publish);
  <span class="hljs-keyword">return</span> html`<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>pure-lit State: </span><span class="hljs-subst">${getState()}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>`</span>;
});

<span class="hljs-comment">// &lt;SomeElement&gt;: &lt;p&gt;React State: false&lt;/p&gt;</span>
<span class="hljs-comment">// &lt;some-element&gt;: &lt;p&gt;pure-lit State: false&lt;/p&gt;</span>

<span class="hljs-comment">// release hormone</span>
releaseHormone(hormone, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// &lt;SomeElement&gt;: &lt;p&gt;React State: true&lt;/p&gt;</span>
<span class="hljs-comment">// &lt;some-element&gt;: &lt;p&gt;pure-lit State: true&lt;/p&gt;</span>
</code></pre>
<p>Unlike the hormone you can find in nature, this one however can transport additional information if you need it. Let's take the example, but this time with a counter</p>
<pre class="hljs" v-pre><code><span class="hljs-keyword">const</span> hormone = defineHormone(<span class="hljs-string">&quot;example&quot;</span>, { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });

pureLit(<span class="hljs-string">&quot;some-element&quot;</span>, <span class="hljs-function">(<span class="hljs-params">element</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> count = useState(element, <span class="hljs-number">0</span>)
  useReceptor(element, hormone, <span class="hljs-keyword">async</span> value =&gt; count.publish(value.count));
  <span class="hljs-keyword">return</span> html`<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Receptor State: </span><span class="hljs-subst">${count.getState()}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>`</span>;
});

<span class="hljs-comment">// some-element: &lt;p&gt;Receptor State: 0&lt;/p&gt;</span>

<span class="hljs-comment">// release hormone</span>
releaseHormone(hormone, <span class="hljs-function">(<span class="hljs-params">currentCount</span>) =&gt;</span> ({
  <span class="hljs-attr">count</span>: currentCount + <span class="hljs-number">1</span>,
}));

<span class="hljs-comment">// some-element: &lt;p&gt;Receptor State: 1&lt;/p&gt;</span>
</code></pre>
<p>In theory, you can also release the hormone from the same component, but really you can release it everywhere as they are global in the organism.</p>
<p>Receptors can also have filters. This can be used to manage the global state drawbacks. Let's take the counter example, and a page where two counters are used.</p>
<pre class="hljs" v-pre><code><span class="hljs-keyword">const</span> hormone = defineHormone(<span class="hljs-string">&quot;example&quot;</span>, { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">counter</span>: <span class="hljs-literal">undefined</span> });

pureLit(<span class="hljs-string">&quot;some-element&quot;</span>, <span class="hljs-function">(<span class="hljs-params">element</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> count = useState(element, <span class="hljs-number">0</span>)
  useReceptor(
    element,
    hormone,
    <span class="hljs-comment">// the filter that only applies the counter if the name===counter</span>
    <span class="hljs-function">(<span class="hljs-params">{ counter }</span>) =&gt;</span> counter === element.name,
    <span class="hljs-keyword">async</span> ({ count }) =&gt; count.publish(count)
  );
  <span class="hljs-keyword">return</span> html`<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Receptor State: </span><span class="hljs-subst">${count.getState()}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>`</span>;
});

<span class="hljs-comment">// some-element[name=first]: &lt;p&gt;Receptor State: 0&lt;/p&gt;</span>
<span class="hljs-comment">// some-element[name=other]: &lt;p&gt;Receptor State: 0&lt;/p&gt;</span>

<span class="hljs-comment">// release hormone</span>
releaseHormone(hormone, <span class="hljs-function">(<span class="hljs-params">currentCount</span>) =&gt;</span> ({
  <span class="hljs-attr">count</span>: currentCount + <span class="hljs-number">1</span>,
  <span class="hljs-attr">counter</span>: <span class="hljs-string">&quot;first&quot;</span>,
}));

<span class="hljs-comment">// some-element[name=first]: &lt;p&gt;Receptor State: 1&lt;/p&gt;</span>
<span class="hljs-comment">// some-element[name=other]: &lt;p&gt;Receptor State: 0&lt;/p&gt;</span>
</code></pre>
<p>If we wouldn't have added the filter, all counter instances would have been incremented.</p>
<p>While this might look like a drawback at first (and it is something that can lead to bugs if not tested properly), it is actually one of the huge advantages of <code>Organismus</code>. Think about a spreadsheet like application. We have thousands of identical cells, some of those with references to others. If a field changes, it releases a hormone, and the others can check if they are affected and change only if.</p>
<pre class="hljs" v-pre><code><span class="hljs-keyword">const</span> cellChanged = defineHormone(<span class="hljs-string">&quot;cell/changed&quot;</span>, {
  <span class="hljs-attr">row</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">column</span>: <span class="hljs-string">&quot;A&quot;</span>,
  <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;&quot;</span>,
});

pureLit(<span class="hljs-string">&quot;cell-element&quot;</span>, <span class="hljs-function">(<span class="hljs-params">element</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { row, col } = element;
  <span class="hljs-keyword">const</span> value = useState(element, <span class="hljs-string">&quot;&quot;</span>)
  <span class="hljs-keyword">const</span> referenceFieldValues = useState(element, {})
  isFormula(value) &amp;&amp; referenceFieldValues.publish(loadReferenceFields(value))
  useReceptor(
    element,
    cellChanged,
    <span class="hljs-comment">// the filter that only applies if the field has a formula and references the field that changed</span>
    <span class="hljs-function">(<span class="hljs-params">cell</span>) =&gt;</span> isFormula(value) &amp;&amp; hasReference(value, cell)
    <span class="hljs-keyword">async</span> cell =&gt; referenceFieldValues.publish(
      ...referenceFieldValues.getState().filter(<span class="hljs-function"><span class="hljs-params">field</span> =&gt;</span> field !== cell),
      cell
    )
  );
  <span class="hljs-keyword">return</span> isFormula(value)
    ? html`<span class="hljs-subst">${calculatedField(referenceFieldValues)}</span><span class="xml">`</span>
    : html`<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>
        @<span class="hljs-attr">change</span>=</span></span><span class="hljs-subst">${({ target }) =&gt;
          releaseHormone(cellChanged, {
            value: target.value,
            row,
            col,
          })}</span><span class="xml"><span class="hljs-tag">
        <span class="hljs-attr">value</span>=</span></span><span class="hljs-subst">${value}</span><span class="xml"><span class="hljs-tag">
      /&gt;</span>`</span>;
});
</code></pre>
<h3>Hypothalamus</h3>
<p>As your application grows, you will get to the point where you need some orchestration. For that you can use the <code>hypothalamus</code>, which allows you to trigger side-effects on released hormones.</p>
<p>Let's take a look at an example todo-list</p>
<pre class="hljs" v-pre><code><span class="hljs-keyword">const</span> todoAdd = defineHormone&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">&quot;todo/add&quot;</span>);
<span class="hljs-keyword">const</span> todoList = defineHormone&lt;<span class="hljs-built_in">string</span>[]&gt;(<span class="hljs-string">&quot;todo/list&quot;</span>, { <span class="hljs-attr">defaultValue</span>: [] });

hypothalamus.on(todoAdd, <span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span>
  releaseHormone(todoList, <span class="hljs-function">(<span class="hljs-params">todos</span>) =&gt;</span> [...todos, todo])
);

pureLit(<span class="hljs-string">&quot;component-list&quot;</span>, <span class="hljs-function">(<span class="hljs-params">element</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> list = useReceptor(element, element.receptor);
  <span class="hljs-keyword">return</span> html`<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    </span><span class="hljs-subst">${list.map((item) =&gt; html`<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span></span><span class="hljs-subst">${item}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>`</span>)}</span><span class="xml">
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>`</span>;
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> pureLit(<span class="hljs-string">&quot;todo-app&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> html`<span class="xml">
    <span class="hljs-tag">&lt;<span class="hljs-name">input-with-button</span> @<span class="hljs-attr">onSubmit</span>=</span></span><span class="hljs-subst">${(value) =&gt; releaseHormone(todoAdd, value)}</span><span class="xml"><span class="hljs-tag">&gt;</span>
      Add todo
    <span class="hljs-tag">&lt;/<span class="hljs-name">input-with-button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Your todos<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">component-list</span> <span class="hljs-attr">.receptor</span>=</span></span><span class="hljs-subst">${todoList}</span><span class="xml"><span class="hljs-tag">&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">component-list</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  `</span>;
});
</code></pre>
<p>The two hormones are separating the information of the change, and the state of the list. When we release the todoAdd Hormone, the hypothalamus releases the todoList, which will be received by the <code>component-list</code> that uses the receptor.</p>
<p>The hypothalamus allows you to collect multiple hormones, and trigger only after all were released.</p>
<pre class="hljs" v-pre><code><span class="hljs-keyword">const</span> corticoliberin = defineHormone(<span class="hljs-string">&quot;Corticoliberin&quot;</span>, { <span class="hljs-attr">defaultValue</span>: <span class="hljs-literal">false</span> });
<span class="hljs-keyword">const</span> adrenocorticotropin = defineHormone(<span class="hljs-string">&quot;Adrenocorticotropin&quot;</span>, {
  <span class="hljs-attr">defaultValue</span>: <span class="hljs-literal">false</span>,
});

<span class="hljs-keyword">const</span> receiver = jest.fn();

hypothalamus.on([corticoliberin, adrenocorticotropin], <span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
  receiver(result);
});

it(<span class="hljs-string">&quot;does not trigger when only no hormone is released&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  expect(receiver).not.toBeCalled();
});

it(<span class="hljs-string">&quot;does not trigger when only one hormone is released&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  releaseHormone(corticoliberin);
  expect(receiver).not.toBeCalled();
});

it(<span class="hljs-string">&quot;triggers the connection when all hormones are released&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  releaseHormone(adrenocorticotropin);
  releaseHormone(corticoliberin);
  expect(receiver).toBeCalled();
});

it(<span class="hljs-string">&quot;doesn&#x27;t trigger the connection again after all hormones are released but only after all hormones are released a second time&quot;</span>, <span class="hljs-function">() =&gt;</span> {
  releaseHormone(adrenocorticotropin, <span class="hljs-literal">true</span>);
  releaseHormone(corticoliberin, <span class="hljs-literal">true</span>);
  expect(receiver).toBeCalledTimes(<span class="hljs-number">1</span>);
  <span class="hljs-comment">// check the result directly</span>
  expect(receiver).toBeCalledWith({
    <span class="hljs-attr">Adrenocorticotropin</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">Corticoliberin</span>: <span class="hljs-literal">true</span>,
  });
  <span class="hljs-comment">// or use the getValue helper function that allows passing the hormone</span>
  <span class="hljs-keyword">const</span> result = receiver.mock.calls[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>];
  expect(getValue(adrenocorticotropin, result)).toBe(<span class="hljs-literal">true</span>);
  expect(getValue(corticoliberin, result)).toBe(<span class="hljs-literal">false</span>);

  releaseHormone(corticoliberin);
  expect(receiver).toBeCalledTimes(<span class="hljs-number">1</span>);
  releaseHormone(adrenocorticotropin);
  expect(receiver).toBeCalledTimes(<span class="hljs-number">2</span>);
});
</code></pre>
<h3>Single Hormone</h3>
<p><code>SingleHormone</code> are a special types of hormone that reset their state to the initial value after all receivers have received the new value. An example can be a form that changes it's value to true once submitted, and back to false immediately after, or the spreadsheet example where every hormone is a <code>SingleHormone</code>.</p>
<p>You should use this when releasing the same hormone from a lot of places (like in the spreadsheets).</p>

    </div>
  